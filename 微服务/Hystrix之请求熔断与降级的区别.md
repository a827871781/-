# Hystrix 特性

## 服务降级：

Fallback 相当于是降级操作。对于查询操作，我们可以实现一个 fallback 方法，当请求后端服务出现异常的时候，可以使用 fallback 方法返回的值. fallback 方法的返回值一般是设置的默认值或者来自缓存。告知后面的请求服务不可用了，不要再来了。

## 请求熔断：

 当 Hystrix Command 请求后端服务失败数量超过一定比例 (默认 50%), 断路器会切换到开路状态 (Open). 这时所有请求会直接失败而不会发送到后端服务。断路器保持在开路状态一段时间后 (默认 5 秒), 自动切换到半开路状态 (HALF-OPEN).

## 用大白话来解释两者:

### 服务降级:

降级就是:你请求我去做某件事,我尝试去做,但是没有成功,我通知你我失败了,但是不会因为没有成功,我就没有信息了.或者说 我也崩溃了,这个消息是我尝试后才反馈的.

比如:打电话,如果对方在电话边就可以立刻接通.如果不在,电话也不会让人一直等待,而是当电话认为对方不在时,直接告诉你,他可能不在电话边.

从程序上讲:当我服务请求不到我想要请求的服务时,不会一直等待,不会报错,而是可以有一个反馈.

```java
@FeignClient(name = "xxx",fallback = xxxFeignFallback.class)
```

### 请求熔断：

熔断就是:当我尝试多次失败后,下次你再叫我去做这件事,我就不去做了,而是直接告诉你,做不了.这个消息 是我没做这就事之前,就已经给你反馈的结果.

比如:打电话,你叫我通知他 晚上出去玩,我给他打电话不通,你催了我两次,我打了两次.第三次 你在催的时候 我就会告诉你,他不在,而不会再去打电话给他 再得出结论 说他不在.

从程序上讲:可能分为 有无降级以下两种情况.

有降级的情况下:用户 请求 A服务,A服务 请求 B服务.B服务宕机.返回404,,A服务返回我们在Fallback中写的方法返回值,请求多次后,不再请求B服务.直接返回Fallback中的方法返回值

无降级的情况下: 用户 请求 A服务,A服务 请求 B服务.B服务宕机.返回404, A服务也返回404给用户.多次后,直接返回404

