

### Exception和Error区别

Exception 和 Error 都是继承了 Throwable 类，在 Java 中只有 Throwable 类型的实例才可以被抛出（ throw ）或者捕获（ catch ），它是异常处理机制的基本组成类型。

#### Exception 和 Error 体现了 Java 平台设计者对不同异常情况的分类：

-   Exception 是程序正常运行中，可以预料的意外情况，也就是要么捕获异常并作出处理，要么继续抛出异常。
-   Error 是指在正常情况下，不大可能出现的情况，系统错误，虚拟机出错，我们处理不了，也不需要我们来处理。绝大部分的 Error 都会导致程序（比如 JVM 自身）处于非正常的、不可恢复状态。既然是非正常情况，所以不便于也不需要捕获，常见的比如 OutOfMemoryError 之类，都是 Error 的子类。

#### Exception又分为 可检查 （checked）异常和 不检查 （unchecked）异常:

-   可检查异常在源代码里必须显式地进行捕获处理，这是编译期检查的一部分。
-   不检查异常就是所谓的运行时异常，类似 NullPointerException 、 ArrayIndexOutOfBoundsException 之类，通常是可以编码避免的逻辑错误，具体根据需要来判断是否需要捕获，并不会在编译期强制要求。

![T.png](https://i.loli.net/2019/07/18/5d3045ebd844550122.png)

#### 异常处理原则

-   尽量不要捕获类似Exception这样的通用异常，而是应该捕获特定异常 ，如：Thread.sleep()抛出的InterruptedException。
-   不要仅仅捕获异常而不做任何处理，不便于将来维护
-   不要在fnally代码块中处理返回值。
-   函数返回值有两种类型：值类型与对象引用。对于对象引用，要特别小心，如果在fnally代码块中对函数返回的对象成员属性进行了修改，即使不在fnally块中显式调用return语句，这个修改也会作用于返回值上。
-   抛出异常时需要针对具体问题来抛出异常，抛出的异常要足够具体详细。
-   在捕获异常时需要对捕获的异常进行细分，这时会有多个 catch 语句块，这几个 catch 块中间泛化程度越低的异常需要越放在前面捕获，泛化程度高的异常捕获放在后面，这样的好处是如果出现异常可以近可能得明确异常的具体类型是什么
-   try-catch代码段会产生额外的性能开销，或者换个角度说，它往往会影响JVM对代码进行优化，所以建议仅捕获有必要的代码段，尽量不要一个大的try包住整段的代码；与此同时，利用异常控制代码流程，也不是一个好主意，远比我们通常意义上的条件语句（ if/else 、 switch ）要低效。
-   Null 的判断逻辑并不是一成不变的，当方法允许返回 null 的时候使用 if-else 控制逻辑，否则就抛出 NullPointerException
-   定义你自己的异常类层次，例如 UserException 和 SystemException 分别代表用户级别的异常信息和系统级别的异常信息，而其他的异常在这两个基类上进行扩展