#### java程序执行步骤

1. javac编译器将源代码编译成字节码。
2. jvm类加载器加载字节码文件
3. 解释器逐行解释执行
4. 程序运行过程中部分热点代码可以通过**JIT**编译成机器码(不是逐行)并存在缓存里(运行时编译保证了可移植性)，下次运行可以直接从缓存里取机器码，效率更高。
5. **AOT**直接将字节码编译成机器代码，这样就避免了 JIT 预热等各方面的开销。

##### AOT:指运行前编译

优点：

1. 在程序运行前编译，可以避免在运行时的编译性能消耗和内存消耗
2. 可以在程序运行初期就达到最高性能
3. 可以显著的加快程序的启动

缺点：

1. 在程序运行前编译会使程序安装的时间增加
2. 牺牲 Java 的一致性
3. 将提前编译的内容保存会占用更多的外存

##### JIT:动态 (运行时) 编译

优点：

1. 可以根据当前硬件情况实时编译生成最优机器指令（ps. AOT 也可以做到，在用户使用是使用字节码根据机器情况在做一次编译）
2. 可以根据当前程序的运行情况生成最优的机器指令序列
3. 当程序需要支持动态链接时，只能使用 JIT
4. 可以根据进程中内存的实际情况调整代码，使内存能够更充分的利用

缺点：

1. 编译需要占用运行时资源，会导致进程卡顿
2. 由于编译时间需要占用运行时间，对于某些代码的编译优化不能完全支持，需要在程序流畅和编译时间之间做权衡
3. 在编译准备和识别频繁使用的方法需要占用时间，使得初始编译不能达到最高性能

Java 是**解释和编译**混合的一种模式

##### 解释执行/编译执行区别

解释执行：类似同声传译，没有提前准备，看到一行解释一行。运行时效率一般。

编译执行：类似录音机 ，提前编译、优化，直接执行，运行时效率高，但是需要编译。