1. **建表原则**

   **在建表的时候尽量遵循以下原则**

   1. 尽量选择小的数据类型，数据类型选择上尽量tinyint(1字节)>smallint(2字节)>int(4字节)>bigint(8字节)，比如逻辑删除yn字段上（1代表可用，0代表）就可以选择tinyint（1字节）类型
   2. 尽量保证字段数据类型长度固定
   3. 尽量避免使用null，使用null的字段查询很难优化，影响索引，可以使用0或''代替
   4. 避免宽表，能拆分就拆分，一个表往往跟一个实体域对应，就像设计对象的时候一样，保持单一原则
   5. 尽量避免使用text和blob，如果非使用不可，将类型为text和blob的字段在独立成一张新表，然后使用主键对应原表
   6. 避免使用float或double类型，这个坑超大，float或double存在精度问题，在进行比较或者加减操作的时候会丢失精度导致数据异常，凡是使用float或double类型的时候考虑下可不可使用int或bigint代替。比如金额，以元为单位使用float或double类型的时候，可以考虑以分为单位使用int，bigint类型代替，然后由业务代码进行单位的转换。
   7. 每张表都加上createUser,createTime.updateUser,updateTime字段
   8. 起名字要规范，包括：库名，表名，字段名，索引名
   9. 查询频繁使用的字段记得加索引
   10. 尽量避免使用外键，不用外键约束，性能更高，然后数据的完整性有程序进行管理
   11. 如果表的数量可以预测到非常大，最好在建表的时候，就进行分表，不至于一时间数据量非常大导致效率问题

   

   **创建使用索引的原则**

   1. 索引的字段尽量要小，根据索引查询数据的快慢取决于b tree的高度，当数据量恒定的时候，字节越少，存的索引的数量就越多，树的高度就越会越低
   2. 遵循索引的最左匹配原则
   3. 注意使用like的时候尽量不要使用“%a%”，这样的不走索引，可以使用“a%”，走索引
   4. 不要在索引的列上进行计算，比如 select * from sys_user where token_expire+1 = 10000，这样的语句 不会走有索引
   5. 什么样的字段建索引，就是那种频繁在where，group by，order by中出现的列，最好加上索引

   

   **优化的建议**

   1. 查询的时候一定要记得使用limit或rownum进行限制
   2. 对于结果只需要一条数据的查询用limit 1进行限制
   3. 使用count(*)来统计行数或者使用count(主键)来查询，使用count(列)的时候，不会统计此列为null的情况
   4. 不要使用select * 来查数据，使用select 需要的列名，这样的方式去查询
   5. 使用join链接代替子查询
   6. 不要使用外键，外键的约束可以放在程序里解决
   7. 控制一下in操作的集合数量，不要太大了
   8. 针对慢查询使用explain去分析原因，然后优化sql，让其尽量走索引

   
