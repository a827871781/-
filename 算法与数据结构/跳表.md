# 跳表

## 什么是跳表

跳跃列表是一种数据结构。它允许快速查询一个有序连续元素的数据链表。跳跃列表的平均查找和插入时间复杂度都是 O (log n)，优于普通队列的 O (n)。

快速查询是通过维护一个多层次的链表，且每一层链表中的元素是前一层链表元素的子集（见右边的示意图）。一开始时，算法在最稀疏的层次进行搜索，直至需要查找的元素在该层两个相邻的元素中间。这时，算法将跳转到下一个层次，重复刚才的搜索，直到找到需要查找的元素为止。跳过的元素的方法可以是随机性选择  或确定性选择，其中前者更为常见。

以上 是维基百科的 答案.

用人话将 其实就是 可以有N层索引的链表.

![c91ecf72-05c1-11ea-8a6d-acde48001122](https://i.loli.net/2019/11/13/21gLlna9pVvcFKE.png )

如图所示:

如果没有索引的情况下,我们想要查找到 6 那么 需要迭代 6 次 才可以查找到.

但是通过遍历索引可以将这个次数缩短.

步骤:

1.  6 > 1 索引,继续比较5索引
2.  6> 5 ,继续会比较7 索引
3.  7>6 ,退回至5,并向下层寻找 到 5 真实数据链表.
4.  5 != 6 ,向后寻找,到 6 真实数据.结束.

如此便节省了两次查询.有人可能会想并没有节省很多次数,还使得链表的维护更加麻烦.不值当,

我们这里是只有一层,当数据量很大,且有多层索引时,那么这个效率 就会被提示到一个很大的数字.

其实,跳表就可以理解为链表的二分查找.

redis 就是用跳表来实现的有序集合

## 跳表查询过程

在查找目标元素时，从顶层列表、头元素起步。算法沿着每层链表搜索，直至找到一个大于或等于目标的元素，或者到达当前层列表末尾。如果该元素等于目标元素，则表明该元素已被找到；如果该元素大于目标元素或已到达链表末尾，则退回到当前层的上一个元素，然后转入下一层进行搜索。每层链表中预期的查找步数

## 插入和删除

跳表本质上就是链表，所以仅插入和删除操作的时间复杂度就为O(1)，但在实际情况中，要插入或删除某个节点，需要先查找到指定位置，而这个查找操作比较费时，但在跳表中这个查找操作的时间复杂度是O(logn)，所以，跳表的插入和删除操作的是时间复杂度也是O(logn)。

## 跳表的维护

当我们不停地往跳表中插入数据时，如果我们不更新索引，就有可能出现某2个索引结点之间数据非常多的情况。极端情况下，跳表还会退化成单链表。

作为一种动态数据结构，我们需要某种手段来维护索引与原始链表大小之间的平衡，也就是说，如果链表中结点多了，索引结点就相应地增加一些，避免复杂度退化，以及查找、插入、删除操作性能下降。
跳表是通过**随机函数**来维护前面提到的“平衡性”。
当我们往跳表中插入数据的时候，我们可以选择同时将这个数据插入到部分索引层中。如何选择加入哪些索引层呢？我们通过一个随机函数，来决定将这个结点插入到哪几级索引中，比如随机函数生成了值K，那我们就将这个结点添加到第一级到第K级这K级索引中。